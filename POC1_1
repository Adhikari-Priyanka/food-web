using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using TMPro;
using System;


public class FoodWeb1 : MonoBehaviour
{
    //PHYTOPLANKTON
    public int Nphtyoplankton = 1; //integer to store no. of phytoplankton 
    //not float because Rp will convert things to int
    public TMP_Text NphytoText; //TMP text to display no of clicks
    public float y0phytoplankton; //float to store y0 of phytoplankton
    public float tphytoplankton = 0;
    public float aphytoplankton=99; 
    public float cphytoplankton =100; 
    public float bphytoplankton = -0.679f;
    
    //TIME
    public int Days; //Integer to store no. of days since start
    public TMP_Text DaysText; //TMP text to display no. of days

    //FISH
    public int Nfish = 0; //integer to store no. of fish
    public TMP_Text NfishText; //TMP text to display no of fish
    public int Cfish = 10; //integer to store cost of fish
    public TMP_Text CfishText; //TMP text to display cost of fish

 
    void Start(){
    

    }
    void Update()
    {

    }

        public void StartTime(){
        Days ++; //increase by one day
        DaysText.text = "No. of days since start = " + Days; //update day text
         y0phytoplankton = (float)Nphtyoplankton;
        Nphtyoplankton = Rp(y0phytoplankton, aphytoplankton); //Run log growth for phytoplankton
        NphytoText.text = "No. of phytoplankton = " + Nphtyoplankton; //Update Nphyto text

        //tphyto update
        tphytoplankton++;

        }
        
        public void AddFish(){
            if (Nphtyoplankton > Cfish){
                Nfish ++; //Fish counter increment
                NfishText.text = "No. of fish = " + Nfish; //Update fish text
                Nphtyoplankton = Nphtyoplankton - Cfish; //Subtract cost from no. of phytoplankton
                y0phytoplankton = Nphtyoplankton; //reset y0 
               tphytoplankton = 0;  //reset tphyto
               aphytoplankton = (cphytoplankton/y0phytoplankton -1); //reset aphyto
               print("y0 new = " + y0phytoplankton); // just to check
               print("t new = " + tphytoplankton);
               print("a new = "+ aphytoplankton);

                NphytoText.text = "No. of phytoplankton = " + Nphtyoplankton;  //Update phytoplankton text
                Cfish = Cfish +10; //Increase cost
                CfishText.text = "Add fish plankton req = " + Cfish; //Update cost text
                }
            else {print("Collect more phytoplankton");} //TO FIX LATER! MAKE IT APPEAR MORE CLEARER
        }
        
        public void RemoveFish(){
            //check for <0 fish
            if (Nfish >0){
                Nfish --; //Fish counter decrease
                NfishText.text = "No. of fish = " + Nfish; //Update fish text
                Cfish = Cfish -10; //Decrease cost
                CfishText.text = "Add fish plankton req = " + Cfish; //Update cost text
                }
        }
        

    public int Rp(float y0, float a){
        //int c is carrying capacity
        //int a is (int c/int y0)-1
        //float b (in decimals, see derivation)
        //take time in terms of how many t has it been since this specfic y0 was used

        double i1 = Math.Exp(bphytoplankton*tphytoplankton);
        float i2 = (float)i1;
        float yt = cphytoplankton/(1 + a*i2);
        int result = (int)yt;
        return result;    }

}
